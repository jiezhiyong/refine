import{j as o}from"./jsx-runtime-C-_spy54.js";import{t as x}from"./form-C6QjBNoK.js";import{a as g}from"./index-hdkCHUwo.js";import{C as h,F as i}from"./field-83Oe2ZIn.js";import{r as j}from"./index-aGVi9Z7h.js";import{P as E}from"./500-CUoB5SEY.js";import{D as b}from"./delete-BZA95DwZ.js";import{F as R}from"./form-C6Kqb6cn.js";import{I as y}from"./input-CqjlsziW.js";import{T as C}from"./textarea-mwnmNnuP.js";import{E as F}from"./action-DSYjqVEc.js";import{E as T}from"./roles-Bk5ifpzU.js";import{g as v,d as I}from"./get-changed-values-vLde9APN.js";import{g as N}from"./form-BJoh7EuQ.js";import{g as P}from"./get-default-title-CrVGbO9H.js";import{z as m}from"./index-Cb7h-Ku-.js";import{u as V}from"./components-CzmxjdGq.js";const q=m.object({title:m.string().min(2,{message:void 0}),description:m.string().min(2)}),$=({matches:e})=>[{title:P(e)}],D={uiTools:e=>o.jsx(z,{match:e})};function ee(){const{initialData:e}=V();return o.jsx(B,{initialData:e})}function z({match:e}){const{data:s}=e||{},{initialData:r}=s||{};return o.jsx("div",{className:"flex items-center gap-1 text-sm",children:o.jsx(b,{disabled:(r==null?void 0:r.title)===T.administrator,variant:"ghost",size:"icon",className:"text-destructive!"})})}function re(){return o.jsx(E,{})}const A=e=>({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||""}),B=({className:e,redirect:s=F.list,initialData:r,action:c})=>{const{formAction:u,id:p=r==null?void 0:r.id,identifier:f}=g({action:c}),t=A(r),n=h({resolver:x(q),defaultValues:t,warnWhenUnsavedChanges:!0,mode:"onChange",refineCoreProps:{resource:f,action:u,id:p,queryOptions:N(t),redirect:s}}),l=j.useCallback(a=>{const d=v(a,t);return I(d)},[]);return o.jsxs(R,{...n,beforeSubmit:l,className:e,recordItemId:r==null?void 0:r.id,children:[o.jsx(i,{...n,name:"title",label:"Title",children:o.jsx(y,{})}),o.jsx(i,{...n,name:"description",label:"Description",children:o.jsx(C,{className:"min-h-60"})})]})};export{re as E,B as R,ee as a,D as h,$ as m};
