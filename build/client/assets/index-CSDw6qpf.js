import{r as s}from"./index-aGVi9Z7h.js";import{u as H,c as p,a as V}from"./index-D6J7U5p3.js";import{c as z}from"./index-DscpCEPB.js";import{u as q}from"./button-hXZAo1l1.js";import{c as J,u as Q}from"./index-BTG9THwZ.js";import{P as D}from"./index-BivEtBZR.js";import{u as W}from"./index-CBJO-X9V.js";import{j as d}from"./jsx-runtime-C-_spy54.js";var _="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[h,G,Z]=z(b),[$,Ie]=J(b,[Z]),[ee,oe]=$(b),N=s.forwardRef((e,r)=>d.jsx(h.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(h.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(te,{...e,ref:r})})}));N.displayName=b;var te=s.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:c,orientation:o,loop:F=!1,dir:g,currentTabStopId:R,defaultCurrentTabStopId:E,onCurrentTabStopIdChange:m,onEntryFocus:u,preventScrollOnEntryFocus:w=!1,...C}=e,v=s.useRef(null),I=q(r,v),t=W(g),[f=null,T]=H({prop:R,defaultProp:E,onChange:m}),[a,i]=s.useState(!1),S=Q(u),M=G(c),x=s.useRef(!1),[k,y]=s.useState(0);return s.useEffect(()=>{const n=v.current;if(n)return n.addEventListener(_,S),()=>n.removeEventListener(_,S)},[S]),d.jsx(ee,{scope:c,orientation:o,dir:t,loop:F,currentTabStopId:f,onItemFocus:s.useCallback(n=>T(n),[T]),onItemShiftTab:s.useCallback(()=>i(!0),[]),onFocusableItemAdd:s.useCallback(()=>y(n=>n+1),[]),onFocusableItemRemove:s.useCallback(()=>y(n=>n-1),[]),children:d.jsx(D.div,{tabIndex:a||k===0?-1:0,"data-orientation":o,...C,ref:I,style:{outline:"none",...e.style},onMouseDown:p(e.onMouseDown,()=>{x.current=!0}),onFocus:p(e.onFocus,n=>{const L=!x.current;if(n.target===n.currentTarget&&L&&!a){const P=new CustomEvent(_,X);if(n.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=M().filter(l=>l.focusable),U=A.find(l=>l.active),B=A.find(l=>l.id===f),Y=[U,B,...A].filter(Boolean).map(l=>l.ref.current);j(Y,w)}}x.current=!1}),onBlur:p(e.onBlur,()=>i(!1))})})}),O="RovingFocusGroupItem",K=s.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:c,focusable:o=!0,active:F=!1,tabStopId:g,...R}=e,E=V(),m=g||E,u=oe(O,c),w=u.currentTabStopId===m,C=G(c),{onFocusableItemAdd:v,onFocusableItemRemove:I}=u;return s.useEffect(()=>{if(o)return v(),()=>I()},[o,v,I]),d.jsx(h.ItemSlot,{scope:c,id:m,focusable:o,active:F,children:d.jsx(D.span,{tabIndex:w?0:-1,"data-orientation":u.orientation,...R,ref:r,onMouseDown:p(e.onMouseDown,t=>{o?u.onItemFocus(m):t.preventDefault()}),onFocus:p(e.onFocus,()=>u.onItemFocus(m)),onKeyDown:p(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){u.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const f=se(t,u.orientation,u.dir);if(f!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let a=C().filter(i=>i.focusable).map(i=>i.ref.current);if(f==="last")a.reverse();else if(f==="prev"||f==="next"){f==="prev"&&a.reverse();const i=a.indexOf(t.currentTarget);a=u.loop?ce(a,i+1):a.slice(i+1)}setTimeout(()=>j(a))}})})})});K.displayName=O;var re={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ne(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function se(e,r,c){const o=ne(e.key,c);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return re[o]}function j(e,r=!1){const c=document.activeElement;for(const o of e)if(o===c||(o.focus({preventScroll:r}),document.activeElement!==c))return}function ce(e,r){return e.map((c,o)=>e[(r+o)%e.length])}var be=N,Fe=K;export{Fe as I,be as R,Ie as c};
