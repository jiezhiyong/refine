import{j as u}from"./jsx-runtime-C-_spy54.js";import{r as i}from"./index-aGVi9Z7h.js";import{c as I,u as j}from"./index-BTG9THwZ.js";import{u as g}from"./index-oFZnn4P-.js";import{P as c}from"./index-BJ0lhZ-K.js";import{c as f}from"./button-8zOaFnqZ.js";var m="Avatar",[C,z]=I(m),[b,A]=C(m),p=i.forwardRef((e,a)=>{const{__scopeAvatar:n,...t}=e,[o,r]=i.useState("idle");return u.jsx(b,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:r,children:u.jsx(c.span,{...t,ref:a})})});p.displayName=m;var x="AvatarImage",S=i.forwardRef((e,a)=>{const{__scopeAvatar:n,src:t,onLoadingStatusChange:o=()=>{},...r}=e,d=A(x,n),s=N(t,r.referrerPolicy),l=j(v=>{o(v),d.onImageLoadingStatusChange(v)});return g(()=>{s!=="idle"&&l(s)},[s,l]),s==="loaded"?u.jsx(c.img,{...r,ref:a,src:t}):null});S.displayName=x;var L="AvatarFallback",w=i.forwardRef((e,a)=>{const{__scopeAvatar:n,delayMs:t,...o}=e,r=A(L,n),[d,s]=i.useState(t===void 0);return i.useEffect(()=>{if(t!==void 0){const l=window.setTimeout(()=>s(!0),t);return()=>window.clearTimeout(l)}},[t]),d&&r.imageLoadingStatus!=="loaded"?u.jsx(c.span,{...o,ref:a}):null});w.displayName=L;function N(e,a){const[n,t]=i.useState("idle");return g(()=>{if(!e){t("error");return}let o=!0;const r=new window.Image,d=s=>()=>{o&&t(s)};return t("loading"),r.onload=d("loaded"),r.onerror=d("error"),r.src=e,a&&(r.referrerPolicy=a),()=>{o=!1}},[e,a]),n}var R=p,_=S,h=w;function T({className:e,...a}){return u.jsx(R,{"data-slot":"avatar",className:f("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...a})}function $({className:e,...a}){return a.src||(a.src="?"),u.jsx(_,{"data-slot":"avatar-image",className:f("aspect-square size-full",e),...a})}function q({className:e,...a}){return u.jsx(h,{"data-slot":"avatar-fallback",className:f("bg-muted flex size-full items-center justify-center rounded-full",e),...a})}export{T as A,$ as a,q as b};
