import{r as i,a as k}from"./index-aGVi9Z7h.js";import{P as D,d as j}from"./index-rNzEV3Eb.js";import{u as L}from"./button-fwOzNkKg.js";import{u as p}from"./index-BTG9THwZ.js";import{j as A}from"./jsx-runtime-C-_spy54.js";import{u as b}from"./index-BR3_WpCG.js";import{R as z}from"./components-BXAOArSq.js";function g(t,e,{checkForDefaultPrevented:s=!0}={}){return function(r){if(t==null||t(r),s===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function K(t,e=globalThis==null?void 0:globalThis.document){const s=p(t);i.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var X="DismissableLayer",C="dismissableLayer.update",Y="dismissableLayer.pointerDownOutside",$="dismissableLayer.focusOutside",I,x=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=i.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...f}=t,o=i.useContext(x),[u,E]=i.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=i.useState({}),N=L(e,d=>E(d)),h=Array.from(o.layers),[O]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),F=h.indexOf(O),T=u?h.indexOf(u):-1,B=o.layersWithOutsidePointerEventsDisabled.size>0,w=T>=F,_=Q(d=>{const y=d.target,M=[...o.branches].some(R=>R.contains(y));!w||M||(r==null||r(d),l==null||l(d),d.defaultPrevented||c==null||c())},m),S=V(d=>{const y=d.target;[...o.branches].some(R=>R.contains(y))||(a==null||a(d),l==null||l(d),d.defaultPrevented||c==null||c())},m);return K(d=>{T===o.layers.size-1&&(n==null||n(d),!d.defaultPrevented&&c&&(d.preventDefault(),c()))},m),i.useEffect(()=>{if(u)return s&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(I=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(u)),o.layers.add(u),U(),()=>{s&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=I)}},[u,m,s,o]),i.useEffect(()=>()=>{u&&(o.layers.delete(u),o.layersWithOutsidePointerEventsDisabled.delete(u),U())},[u,o]),i.useEffect(()=>{const d=()=>v({});return document.addEventListener(C,d),()=>document.removeEventListener(C,d)},[]),A.jsx(D.div,{...f,ref:N,style:{pointerEvents:B?w?"auto":"none":void 0,...t.style},onFocusCapture:g(t.onFocusCapture,S.onFocusCapture),onBlurCapture:g(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:g(t.onPointerDownCapture,_.onPointerDownCapture)})});q.displayName=X;var G="DismissableLayerBranch",J=i.forwardRef((t,e)=>{const s=i.useContext(x),n=i.useRef(null),r=L(e,n);return i.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),A.jsx(D.div,{...t,ref:r})});J.displayName=G;function Q(t,e=globalThis==null?void 0:globalThis.document){const s=p(t),n=i.useRef(!1),r=i.useRef(()=>{});return i.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let f=function(){W(Y,s,o,{discrete:!0})};const o={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=f,e.addEventListener("click",r.current,{once:!0})):f()}else e.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function V(t,e=globalThis==null?void 0:globalThis.document){const s=p(t),n=i.useRef(!1);return i.useEffect(()=>{const r=a=>{a.target&&!n.current&&W($,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function U(){const t=new CustomEvent(C);document.dispatchEvent(t)}function W(t,e,s,{discrete:n}){const r=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?j(r,a):r.dispatchEvent(a)}var Z=k.useId||(()=>{}),H=0;function Ee(t){const[e,s]=i.useState(Z());return b(()=>{s(n=>n??String(H++))},[t]),e?`radix-${e}`:""}var ee="Portal",te=i.forwardRef((t,e)=>{var c;const{container:s,...n}=t,[r,a]=i.useState(!1);b(()=>a(!0),[]);const l=s||r&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?z.createPortal(A.jsx(D.div,{...n,ref:e}),l):null});te.displayName=ee;function ne(t,e){return i.useReducer((s,n)=>e[s][n]??s,t)}var se=t=>{const{present:e,children:s}=t,n=re(e),r=typeof s=="function"?s({present:n.isPresent}):i.Children.only(s),a=L(n.ref,oe(r));return typeof s=="function"||n.isPresent?i.cloneElement(r,{ref:a}):null};se.displayName="Presence";function re(t){const[e,s]=i.useState(),n=i.useRef({}),r=i.useRef(t),a=i.useRef("none"),l=t?"mounted":"unmounted",[c,f]=ne(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const o=P(n.current);a.current=c==="mounted"?o:"none"},[c]),b(()=>{const o=n.current,u=r.current;if(u!==t){const m=a.current,v=P(o);t?f("MOUNT"):v==="none"||(o==null?void 0:o.display)==="none"?f("UNMOUNT"):f(u&&m!==v?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,f]),b(()=>{if(e){let o;const u=e.ownerDocument.defaultView??window,E=v=>{const h=P(n.current).includes(v.animationName);if(v.target===e&&h&&(f("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",o=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},m=v=>{v.target===e&&(a.current=P(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{u.clearTimeout(o),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(o=>{o&&(n.current=getComputedStyle(o)),s(o)},[])}}function P(t){return(t==null?void 0:t.animationName)||"none"}function oe(t){var n,r;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function ve({prop:t,defaultProp:e,onChange:s=()=>{}}){const[n,r]=ie({defaultProp:e,onChange:s}),a=t!==void 0,l=a?t:n,c=p(s),f=i.useCallback(o=>{if(a){const E=typeof o=="function"?o(t):o;E!==t&&c(E)}else r(o)},[a,t,r,c]);return[l,f]}function ie({defaultProp:t,onChange:e}){const s=i.useState(t),[n]=s,r=i.useRef(n),a=p(e);return i.useEffect(()=>{r.current!==n&&(a(n),r.current=n)},[n,r,a]),s}export{q as D,se as P,Ee as a,te as b,g as c,ve as u};
