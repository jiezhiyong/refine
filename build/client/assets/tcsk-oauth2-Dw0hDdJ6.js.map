{"version":3,"file":"tcsk-oauth2-Dw0hDdJ6.js","sources":["../../../app/constants/auth.ts","../../../app/components/error.tsx","../../../app/components/privacy-policy.tsx","../../../app/components/tcsk-oauth2.tsx"],"sourcesContent":["// 认证提供商枚举\nexport enum EnumAuthProvider {\n  userpass = 'userpass',\n  tcshuke = 'tcshuke',\n}\n\n// 认证提供商类型\nexport type TAuthProvider = `${EnumAuthProvider}`;\n","/**\n * 错误信息显示\n */\nexport function ErrorMessage({ error }: { error?: Error | string }) {\n  if (!error) {\n    return null;\n  }\n\n  let message = '';\n  if (typeof error === 'string') {\n    message = error;\n  } else if (error instanceof Error) {\n    message = error.message;\n  }\n  return <p className=\"text-destructive text-sm\">{message}</p>;\n}\n","import { Link } from '@remix-run/react';\n\n/** 登录、注册时的隐私政策 */\nexport function PrivacyPolicy() {\n  return (\n    <div className=\"text-muted-foreground [&_a]:hover:text-primary text-center text-xs text-balance [&_a]:underline [&_a]:underline-offset-4\">\n      {'By clicking continue, you agree to our '}\n      <Link prefetch=\"intent\" viewTransition to=\"#\">\n        Privacy Policy\n      </Link>\n      .\n    </div>\n  );\n}\n","import { useFetcher } from '@remix-run/react';\n\nimport { Button } from '~/components-shadcn/button';\nimport { EnumAuthProvider } from '~/constants';\n\nexport const TcskOAuth2 = ({ redirectTo }: { redirectTo: string }) => {\n  const fetcher = useFetcher();\n  const loading = fetcher.state !== 'idle';\n\n  const handleLogin = () => {\n    fetcher.submit({ redirectTo }, { method: 'POST', action: `/api/auth/${EnumAuthProvider.tcshuke}` });\n  };\n\n  return (\n    <Button\n      type=\"button\"\n      variant=\"outline\"\n      className=\"w-full border-green-500 text-green-500!\"\n      onClick={handleLogin}\n      loading={loading}\n    >\n      {'Continue with TCSK'}\n    </Button>\n  );\n};\n"],"names":["EnumAuthProvider","ErrorMessage","error","message","jsx","PrivacyPolicy","jsxs","Link","TcskOAuth2","redirectTo","fetcher","useFetcher","loading","handleLogin","Button"],"mappings":"qIACY,IAAAA,GAAAA,IACVA,EAAA,SAAW,WACXA,EAAA,QAAU,UAFAA,IAAAA,GAAA,CAAA,CAAA,ECEI,SAAAC,EAAa,CAAE,MAAAC,GAAqC,CAClE,GAAI,CAACA,EACI,OAAA,KAGT,IAAIC,EAAU,GACV,OAAA,OAAOD,GAAU,SACTC,EAAAD,EACDA,aAAiB,QAC1BC,EAAUD,EAAM,SAEVE,EAAAA,IAAA,IAAA,CAAE,UAAU,2BAA4B,SAAQD,EAAA,CAC1D,CCZO,SAASE,GAAgB,CAE5B,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,2HACZ,SAAA,CAAA,0CACDF,EAAAA,IAACG,GAAK,SAAS,SAAS,eAAc,GAAC,GAAG,IAAI,SAE9C,gBAAA,CAAA,EAAO,GAAA,EAET,CAEJ,CCRO,MAAMC,EAAa,CAAC,CAAE,WAAAC,KAAyC,CACpE,MAAMC,EAAUC,EAAW,EACrBC,EAAUF,EAAQ,QAAU,OAE5BG,EAAc,IAAM,CACxBH,EAAQ,OAAO,CAAE,WAAAD,CAAW,EAAG,CAAE,OAAQ,OAAQ,OAAQ,aAAaT,EAAiB,OAAO,EAAA,CAAI,CACpG,EAGE,OAAAI,EAAA,IAACU,EAAA,CACC,KAAK,SACL,QAAQ,UACR,UAAU,0CACV,QAASD,EACT,QAAAD,EAEC,SAAA,oBAAA,CACH,CAEJ"}